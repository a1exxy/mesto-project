(()=>{"use strict";var e=function(e){if("Escape"===e.code){var n=document.querySelector(".popup_opened");t(n)}},t=function(t){t.classList.remove("popup_opened"),document.removeEventListener("keydown",e)},n=function(t){t.classList.add("popup_opened"),document.addEventListener("keydown",e)};function o(e,t){e.disabled=!0,e.classList.add(t)}function r(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?function(e,t){e.disabled=!1,e.classList.remove(t)}(t,n):o(t,n)}function c(e,t,n,o){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,n,o){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n),r.classList.remove(o),r.textContent=""}(e,t,n,o):function(e,t,n,o,r){var c=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o),c.classList.add(r),c.textContent=n}(e,t,t.validationMessage,n,o)}var l="popup__save-button_deactivate",u="popup__text-input_invalid",a="popup__text-input-error_active",i=".popup__inputs",d=".popup__text-input",s=".popup__save-button",p=document.querySelector(".newplace-form"),m=document.querySelector(".profile__add-button"),v=document.querySelector(".popup-newplace"),f=document.querySelector(".newPlaceName"),y=document.querySelector(".newPlaceURL"),_=document.querySelector(".elements"),q=document.querySelector(".element-template").content,S=document.querySelector(".popup-img"),g=S.querySelector(".popup__caption"),k=S.querySelector(".popup__view");function h(e,t){var o=q.querySelector(".element").cloneNode(!0);return o.querySelector(".element__img").src=t,o.querySelector(".element__img").alt="Изображение "+e,o.querySelector(".element__title").textContent=e,o.querySelector(".element__link").addEventListener("click",(function(e){e.target.classList.toggle("element__link_active")})),o.querySelector(".element__trash").addEventListener("click",(function(e){e.target.closest(".element").remove()})),o.querySelector(".element__show").addEventListener("click",(function(e){var t=e.target.closest(".element").querySelector(".element__title").textContent;g.textContent=t,k.alt="Изображение "+t,k.src=e.target.src,n(S)})),o}var L=document.querySelector(".popup-editprofile"),E=document.querySelector(".profile__edit-button"),x=document.querySelector(".profile-editor"),b=document.querySelector(".editProfileName"),C=document.querySelector(".editProfileAboutMe"),w=document.querySelector(".profile__name"),A=document.querySelector(".profile__about-me");var j,M,P,N,D,V;document.querySelectorAll(".popup__close-button").forEach((function(e){e.addEventListener("click",(function(e){t(e.target.closest(".popup"))}))})),document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("click",(function(e){t(e.target)}))})),m.addEventListener("click",(function(){n(v)})),p.addEventListener("submit",(function(e){e.preventDefault(),f.value.length>0&&y.value.length>0&&_.prepend(h(f.value,y.value)),e.target.reset(),o(e.target.querySelector(s),l),t(v)})),E.addEventListener("click",(function(){b.value=w.textContent,C.value=A.textContent,n(L),function(e,t,n,o){var r=document.querySelector(e);r.querySelectorAll(t).forEach((function(e){c(r,e,n,o)}))}(".profile-editor",d,u,a)})),x.addEventListener("submit",(function(e){e.preventDefault(),b.value.length>0&&C.value.length>0&&(w.textContent=b.value,A.textContent=C.value),t(L)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){_.append(h(e.name,e.link))})),j=i,M=d,P=s,N=l,D=u,V=a,document.querySelectorAll(j).forEach((function(e){var t=e.querySelector(P),n=Array.from(e.querySelectorAll(M));n.forEach((function(t){t.addEventListener("input",(function(){c(e,t,D,V)}))})),r(n,t,N),e.addEventListener("input",(function(){r(n,t,N)}))}))})();