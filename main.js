(()=>{"use strict";var e=function(e){"Escape"===e.code&&t(document.querySelector(".popup_opened"))},t=function(t){t.classList.remove("popup_opened"),document.removeEventListener("keydown",e)},n=function(t){t.classList.add("popup_opened"),document.addEventListener("keydown",e)},o=document.querySelector(".newplace-form"),r=document.querySelector(".profile__add-button"),c=document.querySelector(".popup-newplace"),u=document.querySelector(".newPlaceName"),i=document.querySelector(".newPlaceURL"),a=document.querySelector(".elements"),l=document.querySelector(".element-template").content,d=document.querySelector(".popup-img"),s=d.querySelector(".popup__caption"),p=d.querySelector(".popup__view");function m(e,t){var o=l.querySelector(".element").cloneNode(!0),r=o.querySelector(".element__img");return r.src=t,r.alt="Изображение "+e,o.querySelector(".element__title").textContent=e,o.querySelector(".element__link").addEventListener("click",(function(e){e.target.classList.toggle("element__link_active")})),o.querySelector(".element__trash").addEventListener("click",(function(e){e.target.closest(".element").remove()})),o.querySelector(".element__show").addEventListener("click",(function(){s.textContent=e,p.alt="Изображение "+e,p.src=t,n(d)})),o}function v(e,t){e.disabled=!0,e.classList.add(t)}function f(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?function(e,t){e.disabled=!1,e.classList.remove(t)}(t,n):v(t,n)}function y(e,t,n,o){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?function(e,t,n,o){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n),r.classList.remove(o),r.textContent=""}(e,t,n,o):function(e,t,n,o,r){var c=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o),c.classList.add(r),c.textContent=n}(e,t,t.validationMessage,n,o)}var _="popup__save-button_deactivate",q="popup__text-input_invalid",S="popup__text-input-error_active",L=".popup__inputs",k=".popup__text-input",g=".popup__save-button",h=document.querySelector(".popup-editprofile"),E=document.querySelector(".profile__edit-button"),x=document.querySelector(".profile-editor"),b=document.querySelector(".editProfileName"),C=document.querySelector(".editProfileAboutMe"),w=document.querySelector(".profile__name"),j=document.querySelector(".profile__about-me");var A,M,P,N,D,V;document.querySelectorAll(".popup").forEach((function(e){e.addEventListener("mousedown",(function(n){(n.target.classList.contains("popup_opened")||n.target.classList.contains("popup__close-button"))&&t(e)}))})),r.addEventListener("click",(function(){n(c)})),o.addEventListener("submit",(function(e){e.preventDefault(),a.prepend(m(u.value,i.value)),e.target.reset(),t(c)})),E.addEventListener("click",(function(){b.value=w.textContent,C.value=j.textContent,n(h),function(e,t,n,o){var r=document.querySelector(e);r.querySelectorAll(t).forEach((function(e){y(r,e,n,o)}))}(".profile-editor",k,q,S)})),x.addEventListener("submit",(function(e){e.preventDefault(),b.value.length>0&&C.value.length>0&&(w.textContent=b.value,j.textContent=C.value),t(h)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){a.append(m(e.name,e.link))})),A=L,M=k,P=g,N=_,D=q,V=S,document.querySelectorAll(A).forEach((function(e){var t=e.querySelector(P),n=Array.from(e.querySelectorAll(M));n.forEach((function(t){t.addEventListener("input",(function(){y(e,t,D,V)}))})),f(n,t,N),e.addEventListener("input",(function(){f(n,t,N)})),e.addEventListener("reset",(function(){v(t,N)}))}))})();